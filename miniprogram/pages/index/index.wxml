<!--index.wxml-->

<scroll-view class="content" scroll-y type="list">
  <!-- å¤©æ°”ä¿¡æ¯å¡ç‰‡ -->
  <view class="weather-container">
    <view class="location-date">
      <text class="location">{{weatherData.city}}</text>
      <text class="date">{{weatherData.date}}</text>
    </view>
    <view class="current-weather">
      <!-- å·¦ä¾§æ¸©åº¦å’Œå¤©æ°”çŠ¶å†µ -->
      <view class="left-weather-info">
        <view class="temp-info">
          <text class="temperature">{{weatherData.temperature}}</text>
          <text class="weather-condition">{{weatherData.condition}}</text>
        </view>
        <view class="weather-details">
          <view class="weather-detail-item">
            <text>ğŸŒ¬ï¸ {{weatherData.wind}}</text>
          </view>
          <view class="weather-detail-item">
            <text>ğŸ’§ {{weatherData.humidity}}</text>
          </view>
        </view>
      </view>
      
      <!-- å³ä¾§å¤©æ°”å›¾æ ‡å’Œæ¸©åº¦èŒƒå›´ -->
      <view class="right-weather-info">
        <view class="weather-icon-large">
          <!-- <image wx:if="{{weatherData.condition === 'æ™´'}}" src="/images/weather/sunny.svg" mode="aspectFit"></image> -->
          <text>{{weatherData.icon}}</text>
        </view>
        <view class="temp-range">
          <text>{{forecastData[0].lowTemp}}~{{forecastData[0].highTemp}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ä¸ƒæ—¥å¤©æ°”é¢„æŠ¥ -->
  <!-- è€ƒè™‘ä¸å±•ç¤º -->
  <view class="forecast-container">
    <view class="forecast-title">æœªæ¥å¤©æ°”</view>
    
    <view class="forecast-list">
      <view class="forecast-item" wx:for="{{forecastData}}" wx:key="day">
        <text class="day">{{item.day}}</text>
        <view class="weather-icon">{{item.icon}}</view>
        <text class="high-temp">{{item.highTemp}}</text>
        <text class="low-temp">{{item.lowTemp}}</text>
      </view>
    </view>
  </view>
  
  <!-- ç©¿æ­é£æ ¼é€‰æ‹© -->
  <view class="style-container">
    <view class="style-title">ä»Šæ—¥ç©¿æ­é£æ ¼</view>
    <view class="style-options">
      <view class="style-option {{selectedStyle === item.name ? 'selected' : ''}}" 
            wx:for="{{styles}}" 
            wx:key="id"
            bindtap="selectStyle"
            data-index="{{index}}">
        {{item.name}}
      </view>
    </view>
    <button class="generate-ootd-btn" bindtap="generateOOTD">ç”Ÿæˆä»Šæ—¥OOTD</button>
  </view>
</scroll-view>

<!-- OOTDå¼¹çª—ç»„ä»¶ -->
<ootd-popup 
  show="{{showOOTDPopup}}" 
  bind:close="onCloseOOTDPopup"
  bind:favorite="onFavoriteOOTD"
  bind:save="onSaveOOTD"
  weatherInfo="{{weatherData.temperature}} {{weatherData.condition}}"
  styleType="{{selectedStyle}}"
  ootdDesc="{{ootdRecommendation.description}}"
  clothingItems="{{ootdRecommendation.items}}"
  styleImages="{{ootdRecommendation.images}}"
  fashionTip="{{ootdRecommendation.tip}}"
></ootd-popup>

